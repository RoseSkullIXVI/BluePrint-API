<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Data Lake</title>
    <link rel="stylesheet" href="./css/output.css">
    <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
  </head>
  <body>
    <h1 class="font-mono font-semibold text-gray-800 sm:text-2xl lg:text-3xl lg:leading-tight ml-4 mt-4">
      Data Lake
    </h1>
    
     <!-- Form -->
<div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
  <!-- Grid -->
  <div class="grid md:grid-cols-2 items-center gap-12">
    <div>
      <h1 class="font-mono font-semibold text-gray-800 sm:text-2xl lg:text-3xl lg:leading-tight">
        Guide to Completing the Submission Form
      </h1>
      <p class="font-mono mt-1 md:text-lg text-gray-800">
        Welcome! This form allows you to submit files and URLs for processing. Please follow the instructions below to ensure your submission is processed smoothly.
      </p>

      <div class="mt-8">
        <h2 class="font-mono text-xl font-semibold text-gray-800">
          File Upload
        </h2>
        <h3 class="font-mono text-lg font-light text-gray-800">
         Format
        </h3>

        <ul role="list" class="marker:text-blue-200 font-mono list-disc ps-5 space-y-2 text-sm text-gray-600 ">
          <li>
            Excel files (.xlsx)
          </li>           
          <li>
             CSV files (.csv)
          </li>           
          <li>
            Images (JPEG, PNG, GIF, BMP, TIFF, SVG, WEBP, HEIC, ICO)
          </li>          
          <li>
            Audio (WAV)
          </li>
          <li>
           Video (MP4, AVI)
          </li>
        </ul>
      </div>

      <div class="mt-8">
        <h2 class="font-mono text-xl font-semibold text-gray-800">
          URL 
        </h2>
        <h3 class="font-mono text-base font-semibold text-gray-800">
          Please ensure to use the URL at your source.
        </h3>
        <h3 class="font-mono text-sm font-light text-gray-800">
          The URL will be used to create a pipeline for data extraction and processing through your source and the data lake. 
        </h3>
      </div>
    </div>
    <!-- End Col -->

    <div class="relative">
      <!-- Card -->
      <div class="flex flex-col border rounded-xl p-4 sm:p-6 lg:p-10 dark:border-gray-700">
        <h2 class="font-mono text-xl font-semibold text-gray-800">
          Fill in the form
        </h2>

        <form id="form" hx-encoding="multipart/form-data" hx-post="/upload" hx-target = "#hs-about-hire-us-1">
          <div class="mt-6 grid gap-4 lg:gap-6">
            <!-- Grid -->
            <div>
              <label class="block">
                <span class="sr-only">Choose File</span>
                <input type="file" name="file" class="font-mono block w-full text-sm text-gray-500
                  file:me-4 file:py-2 file:px-4
                  file:rounded-lg file:border-0
                  file:text-sm file:font-semibold
                  file:bg-blue-600 file:text-white
                  hover:file:bg-blue-700
                  file:disabled:opacity-50 file:disabled:pointer-events-none
                ">
              </label>
            </div>
            <!-- End Grid -->
          </div>
          <div class="mt-6 grid">
            <button type="submit" class="font-mono w-full py-3 px-4 inline-flex justify-center items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none ">Send Data</button>
          </div>
        </form>

        <div>
          <label for="hs-about-hire-us-1" class="font-mono block mb-2 text-sm text-gray-700 font-medium ">JSON Response</label>
          <textarea id="hs-about-hire-us-1" name="hs-about-hire-us-1" rows="4" class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none "></textarea>
        </div>
      </div>
      <!-- End Card -->
    </div>
    <!-- End Col -->
  </div>
  <!-- End Grid -->
</div>
<!-- End Data lake -->

<script>
  document.body.addEventListener('htmx:afterRequest', function(event) {
    // Check if the request is for the specific form
    if (event.detail.elt.id === 'form') {
      // Prevent HTMX from automatically inserting the response
      event.preventDefault();

      // Use the response detail to get the JSON response
      const jsonResponse = event.detail.xhr.response;

      // Optionally, parse and stringify the JSON to pretty-print it
      const prettyJson = JSON.stringify(JSON.parse(jsonResponse), null, 2);

      // Find the textarea by ID and set its value to the pretty JSON
      document.getElementById('hs-about-hire-us-1').value = prettyJson;
    }
  });
</script>
  </body>